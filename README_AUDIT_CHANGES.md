# README.md 审计修正说明

## 修正日期
2024年（根据任务要求）

## 修正原则
所有修正基于实际代码功能验证，删除不存在的功能描述，准确反映插件真实能力。

## 主要修正内容

### 1. 仪表盘（Dashboard）统计指标
**原描述**：📊 今日/本周/本月文章产出统计
**修正为**：📊 文章产出总量统计与日均输出量
**原因**：代码中的 `get_dashboard_stats()` 只提供总量统计和平均日产量，不提供按日/周/月的时间段统计。

### 2. 图像API功能描述
**扩展说明**：
- 明确说明段落配图是通过HTML注释占位符实现（`<!-- image prompt: ... -->`）
- 补充说明支持同步和异步两种生成模式
- 增加灵活的提示词系统、数量控制、智能重试、增量更新等核心能力描述
**原因**：原描述过于简略，未体现实际实现细节和技术优势。

### 3. 文章任务生成能力
**删除**：🏷️ 标签生成：基于内容自动提取关键词标签
**原因**：代码中未实现自动标签提取功能。

### 4. 发布规则配置项与高级功能
**删除的功能**：
- 🏷️ 默认标签
- 🔑 SEO关键词
- 📊 数据埋点
- 🔔 推送通知
- 📱 同步发布

**修正后的功能**：
- 保留：配图策略、文章模板、品牌资料、发布间隔、发布语言
- 高级功能：自动内链（已验证）、参考资料、AI角色设定

**原因**：代码中未实现已删除的功能，仅保留实际存在的配置项。

### 5. 文章结构智能优化
**删除**：
- 📊 受欢迎度统计：追踪哪种结构的文章流量更高
- 🔄 A/B测试：同主题使用不同结构对比效果
- 🎯 优先复用：自动推荐高转化率的结构模板

**修正为**：
- 📊 使用次数统计：记录每个结构模板的使用频率
- 🎯 向量匹配：基于语义向量自动匹配最合适的结构模板

**原因**：代码中只有 `usage_count` 字段统计使用次数，无流量分析、A/B测试或转化率跟踪功能。

### 6. 主题任务去重机制
**修正说明**：
- 从"基于向量相似度过滤重复主题"改为"向AI提供已有主题列表，避免生成重复主题；支持基于向量和字符相似度的去重判断"
- 增加"并发控制：防止重复创建相同规则的任务"

**原因**：实际实现是在生成提示词时包含已有主题列表，由AI避免重复，而非事后过滤。

### 7. 主题任务运营策略
**删除**：📅 定时任务：每天凌晨自动生成新主题，保持库存充足
**修正为**：📅 手动触发：根据需要手动创建主题生成任务
**原因**：插件不支持自动定时创建主题任务，所有任务都需要手动触发。

### 8. 高级配置 - 删除不存在的功能
**删除章节**：设置定时任务
**原因**：规则管理中不存在"定时执行"功能，无法自动在指定时间创建任务。

### 9. 文章发布策略
**删除**：🔄 覆盖更新：对老文章重新生成，保留URL不变
**修正说明**：定时发布改为"配置发布间隔，按照时间序列定时发布文章"
**原因**：代码中未实现覆盖更新功能；定时发布是通过 `publish_interval_minutes` 配置实现。

### 10. 质量控制流程
**删除的机器质控功能**：
- 关键词密度检查，避免过度SEO
- 敏感词过滤，规避法律风险
- 发现问题主题加入黑名单

**修正为**：
- 自动化控制：向量相似度检测、字数统计、结构化验证
- 抽样审核和全量审核建议

**原因**：代码中未实现关键词密度检查、敏感词过滤或黑名单功能。

### 11. 文章任务质量保障
**修正**：
- "失败重试：API超时或错误自动重试，最多5次" → "失败重试：API超时或错误自动重试，支持指数退避策略"
- 删除"相似度检测：避免生成与历史文章过于相似的内容"
- 增加"任务恢复：超时或异常的任务自动检测和恢复"

**原因**：实际重试次数为3次（代码中 `$max_retries = 3`），采用指数退避策略（`pow(2, $attempt - 1)`）。

### 12. FAQ Q10 修正
**修正**："任务失败后自动重试（最多5次）" → "任务失败后自动重试（支持指数退避策略）"
**增加**："超时任务会自动检测并恢复"
**原因**：与实际代码实现保持一致。

## 验证为准确的功能

以下功能经过代码验证，确认真实存在：

✅ **关键词工具**：支持多数据源（Google、YouTube、Baidu、DuckDuckGo、Wikipedia、Taobao）
✅ **图像生成**：支持特色图片和内容配图（通过HTML注释占位符）
✅ **异步图像处理**：支持异步生成模式
✅ **自动内链**：`enable_internal_linking` 功能存在
✅ **API容灾**：存在 `try_predefined_api_fallback()` 方法
✅ **定时发布**：通过 `publish_interval_minutes` 和 `post_status = 'future'` 实现
✅ **品牌资料自动匹配**：基于向量相似度自动选择最匹配的品牌资料
✅ **向量聚类**：完整的向量生成、聚类和增量分配功能
✅ **任务队列**：全局锁、优先级队列、指数退避重试策略
✅ **任务恢复**：超时任务自动检测和恢复机制
✅ **文章结构使用统计**：`usage_count` 字段追踪使用频率

## 修正统计

- **删除不存在的功能描述**：约15处
- **修正不准确的数字/描述**：约8处
- **扩展不够详细的说明**：约3处
- **保持准确的功能描述**：约90%以上

## 总结

此次审计确保README.md中的每项功能描述都有代码实现支撑，删除了所有想象或计划中的功能，使文档更加真实可信，有助于用户建立正确的预期。
